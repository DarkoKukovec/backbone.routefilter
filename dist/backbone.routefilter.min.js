/*! backbone.routefilter - v0.2.1 - 2015-04-28
* https://github.com/boazsender/backbone.routefilter
* Copyright (c) 2015 Boaz Sender; Licensed MIT */
(function(e){typeof define=="function"&&define.amd?define(["backbone","underscore"],e):typeof exports=="object"?module.exports=e(require("backbone"),require("underscore")):e(window.Backbone,window._)})(function(e,t){var n=e.Router.prototype.route,r=function(){};t.extend(e.Router.prototype,{before:r,after:r,route:function(e,i,s){s||(s=this[i]);var o=t.bind(function(){s&&s.apply(this,arguments);var n;t.isFunction(this.after)?n=this.after:typeof this.after[e]!="undefined"?n=this.after[e]:n=r;var i=[e,t.toArray(arguments)];n.apply(this,i)},this),u=t.bind(function(){var n;t.isFunction(this.before)?n=this.before:typeof this.before[e]!="undefined"?n=this.before[e]:n=r;var i=[e,t.toArray(arguments)],s=n.apply(this,i);window.Promise&&s instanceof window.Promise?s.then(function(){o.apply(this,arguments)}):s!==!1&&o.apply(this,arguments)},this);return n.call(this,e,i,u)}})});